<section>
    <h1>D√≠a 10: Despliegue a Producci√≥n üöÄ</h1>
    <p>M√≥dulo de desarrollo Frontend</p>
    <p>üë®‚Äçüè´ Docente: Imanol Villarreal</p>
</section>


<section>
    <h2>Agenda del D√≠a üìÖ</h2>
    <ol>
        <li>Introducci√≥n al despliegue de aplicaciones Next.js</li>
        <li>M√©todos de despliegue</li>
        <li>Despliegue local con PM2</li>
        <li>Despliegue en Digital Ocean</li>
        <li>Despliegue en Vercel</li>
        <li>Comparaci√≥n de m√©todos de despliegue</li>
        <li>Mejores pr√°cticas y consideraciones de seguridad</li>
        <li>Resumen y preguntas</li>
    </ol>
</section>


<section>
    <h2>1. Introducci√≥n al despliegue de aplicaciones Next.js üåê</h2>
    <ul>
        <li>¬øQu√© significa desplegar una aplicaci√≥n?</li>
        <li>Consideraciones para aplicaciones Next.js</li>
        <li>Diferencias entre entornos de desarrollo y producci√≥n</li>
        <li>Importancia de la escalabilidad y el rendimiento</li>
    </ul>
</section>


<section>
    <h2>2. M√©todos de despliegue üõ†Ô∏è</h2>
    <ul>
        <li>Despliegue local con PM2</li>
        <li>Despliegue en Digital Ocean</li>
        <li>Despliegue en Vercel</li>
    </ul>
</section>


<section>
    <h2>3. Despliegue local con PM2 üñ•Ô∏è</h2>
    <p>PM2 es un gestor de procesos para Node.js que facilita el despliegue y mantenimiento de aplicaciones.</p>
</section>


<section>
    <h3>Instalaci√≥n de PM2</h3>
    <pre><code class="hljs bash">npm install -g pm2</code></pre>
    <p>Verifica la instalaci√≥n:</p>
    <pre><code class="hljs bash">pm2 --version</code></pre>
</section>


<section>
    <h3>Preparaci√≥n del proyecto Next.js</h3>
    <ol>
        <li>Clona el repositorio del proyecto:
            <pre><code
                    class="hljs bash">git clone https://github.com/IonVillarreal/mi-proyecto-noticias.git</code></pre>
        </li>
        <li>Instala las dependencias:
            <pre><code class="hljs bash">cd mi-proyecto-noticias && npm install</code></pre>
        </li>
        <li>Construye la aplicaci√≥n:
            <pre><code class="hljs bash">npm run build</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Despliegue con PM2</h3>
    <ol>
        <li>Navega al directorio de tu proyecto:
            <pre><code class="hljs bash">cd mi-proyecto-noticias</code></pre>
        </li>
        <li>Inicia la aplicaci√≥n con PM2:
            <pre><code class="hljs bash">pm2 start npm --name "mi-proyecto-noticias" -- start</code></pre>
        </li>
        <li>Verifica que la aplicaci√≥n est√© ejecut√°ndose:
            <pre><code class="hljs bash">pm2 list</code></pre>
        </li>
        <li>Configura PM2 para iniciar autom√°ticamente al arrancar el sistema:
            <pre><code class="hljs bash">pm2 startup systemd
pm2 save</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Comandos √∫tiles de PM2</h3>
    <ul>
        <li>Listar procesos:
            <pre><code class="hljs bash">pm2 list</code></pre>
        </li>
        <li>Monitorear:
            <pre><code class="hljs bash">pm2 monit</code></pre>
        </li>
        <li>Reiniciar:
            <pre><code class="hljs bash">pm2 restart mi-proyecto-noticias</code></pre>
        </li>
        <li>Detener:
            <pre><code class="hljs bash">pm2 stop mi-proyecto-noticias</code></pre>
        </li>
        <li>Eliminar:
            <pre><code class="hljs bash">pm2 delete mi-proyecto-noticias</code></pre>
        </li>
    </ul>
</section>


<section>
    <h2>4. Despliegue en Digital Ocean üåä</h2>
    <p>Digital Ocean ofrece Droplets, que son servidores virtuales privados (VPS) donde puedes desplegar tu
        aplicaci√≥n.</p>
</section>


<section>
    <h3>Creaci√≥n de un Droplet</h3>
    <ol>
        <li>Inicia sesi√≥n en tu cuenta de Digital Ocean</li>
        <li>Haz clic en "Create" y selecciona "Droplets"</li>
        <li>Elige Ubuntu como sistema operativo</li>
        <li>Selecciona un plan adecuado</li>
        <li>Elige una regi√≥n cercana a tus usuarios</li>
        <li>Agrega tu clave SSH o crea una contrase√±a</li>
        <li>Haz clic en "Create Droplet"</li>
    </ol>
</section>


<section>
    <h3>Configuraci√≥n del Droplet</h3>
    <ol>
        <li>Con√©ctate v√≠a SSH:
            <pre><code class="hljs bash">ssh root@tu_ip_droplet</code></pre>
        </li>
        <li>Actualiza el sistema:
            <pre><code class="hljs bash">sudo apt update && sudo apt upgrade -y</code></pre>
        </li>
        <li>Instala Node.js y Git:
            <pre><code class="hljs bash">curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs git</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Despliegue de la aplicaci√≥n en el Droplet</h3>
    <ol>
        <li>Clona el repositorio:
            <pre><code
                    class="hljs bash">git clone https://github.com/IonVillarreal/mi-proyecto-noticias.git</code></pre>
        </li>
        <li>Instala dependencias y construye la aplicaci√≥n:
            <pre><code class="hljs bash">cd mi-proyecto-noticias
npm install
npm run build</code></pre>
        </li>
        <li>Instala y configura PM2:
            <pre><code class="hljs bash">npm install -g pm2
pm2 start npm --name "mi-proyecto-noticias" -- start
pm2 startup systemd
pm2 save</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Configuraci√≥n de Nginx como proxy inverso</h3>
    <ol>
        <li>Instala Nginx:
            <pre><code class="hljs bash">sudo apt install nginx</code></pre>
        </li>
        <li>Edita la configuraci√≥n en <code>/etc/nginx/sites-available/default</code>:
            <pre><code class="hljs nginx">
server {
    listen 80 default_server;
    listen [::]:80 default_server;


server_name _;

# Proxy todas las solicitudes a tu aplicaci√≥n Next.js
location / {
    proxy_pass http://127.0.0.1:8080;  # Puerto donde PM2 est√° ejecutando tu aplicaci√≥n Next.js
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
}

# Proxy para la API en Express
location /api/ {
    rewrite ^/api/?(.*)$ /$1 break;
    proxy_pass http://127.0.0.1:3000;  # Puerto donde PM2 est√° ejecutando tu backend Express
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

}

            </code>
            </pre>
        </li>


        Verifica y reinicia Nginx:
        sudo nginx -t
        sudo systemctl restart nginx


    </ol>
</section>


<section>
    <h2>5. Despliegue en Vercel ‚ñ≤</h2>
    <p>Vercel es la plataforma creada por los desarrolladores de Next.js, ofreciendo una experiencia de despliegue
        optimizada.</p>
</section>


<section>
    <h3>Preparaci√≥n para el despliegue en Vercel</h3>
    <ol>
        <li>Crea una cuenta en Vercel</li>
        <li>Instala la CLI de Vercel:
            <pre><code class="hljs bash">npm i -g vercel</code></pre>
        </li>
        <li>Inicia sesi√≥n:
            <pre><code class="hljs bash">vercel login</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Despliegue con Vercel</h3>
    <ol>
        <li>Ve al directorio del proyecto:
            <pre><code class="hljs bash">cd mi-proyecto-noticias</code></pre>
        </li>
        <li>Ejecuta:
            <pre><code class="hljs bash">vercel</code></pre>
        </li>
        <li>Sigue las instrucciones en pantalla</li>
        <li>Obt√©n la URL de tu aplicaci√≥n desplegada</li>
    </ol>
</section>


<section>
    <h3>Configuraci√≥n adicional en Vercel</h3>
    <ul>
        <li>Variables de entorno en el dashboard</li>
        <li>Dominio personalizado</li>
        <li>Integraci√≥n continua con GitHub</li>
    </ul>
</section>


<section>
    <h2>6. Comparaci√≥n de m√©todos de despliegue üìä</h2>
    <table>
        <thead>
        <tr>
            <th>Aspecto</th>
            <th>PM2 (Local)</th>
            <th>Digital Ocean</th>
            <th>Vercel</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Control</td>
            <td>Alto</td>
            <td>Alto</td>
            <td>Medio</td>
        </tr>
        <tr>
            <td>Facilidad de uso</td>
            <td>Media</td>
            <td>Baja</td>
            <td>Alta</td>
        </tr>
        <tr>
            <td>Escalabilidad</td>
            <td>Limitada</td>
            <td>Alta</td>
            <td>Alta</td>
        </tr>
        <tr>
            <td>Costo</td>
            <td>Bajo</td>
            <td>Medio</td>
            <td>Bajo-Medio</td>
        </tr>
        </tbody>
    </table>
</section>


<section>
    <h2>7. Mejores pr√°cticas y consideraciones de seguridad üîí</h2>
    <ul>
        <li>Usa HTTPS para todas las conexiones</li>
        <li>Configura correctamente las variables de entorno</li>
        <li>Implementa logging y monitoreo</li>
        <li>Mant√©n tus dependencias actualizadas</li>
        <li>Realiza copias de seguridad regularmente</li>
        <li>Utiliza un firewall y configura los puertos</li>
        <li>Implementa rate limiting para prevenir ataques DoS</li>
    </ul>
</section>


<section>
    <h2> Resumen de la clase üìù</h2>
    <ul>
        <li>Vimos tres m√©todos para desplegar Next.js</li>
        <li>PM2 es ideal para entornos locales y control total</li>
        <li>Digital Ocean ofrece flexibilidad y control</li>
        <li>Vercel facilita el despliegue con m√≠nima configuraci√≥n</li>
        <li>La elecci√≥n depende de tus necesidades espec√≠ficas</li>
        <li>La seguridad es esencial en cualquier despliegue</li>
    </ul>
</section>

<section>
    <h2>Resumen del Curso üìö</h2>
    <ul>
        <li>Fundamentos de React y componentes üß±</li>
        <li>Next.js y App Router para enrutamiento avanzado üó∫Ô∏è</li>
        <li>Dise√±o de interfaces con Material-UI (MUI) üé®</li>
        <li>Manejo de formularios con React Hook Form y validaci√≥n con Zod ‚úÖ</li>
        <li>T√©cnicas de Data Fetching y Caching en App Router üîÑ</li>
        <li>Implementaci√≥n de autenticaci√≥n y autorizaci√≥n en Next.js üîê</li>
        <li>Gesti√≥n de estado del servidor con TanStack Query üìä</li>
        <li>Patrones avanzados de State Management üß†</li>
        <li>Optimizaci√≥n de rendimiento y t√©cnicas avanzadas ‚ö°</li>
        <li>Despliegue de aplicaciones Next.js en diferentes entornos üöÄ</li>
    </ul>
</section>

<section>
    <h2>Pr√≥ximos Pasos en Desarrollo Frontend üöÄ</h2>

    <h3>Temas Recomendados:</h3>
    <ul>
        <li>i18n con Next.js: Internacionalizaci√≥n de aplicaciones üåé</li>
        <li>Tailwind CSS: Framework de utilidades CSS para dise√±o r√°pido üé®</li>
        <li>Shadcn UI: Componentes reutilizables y personalizables üß©</li>
        <li>Despliegue con Docker: Containerizaci√≥n para aplicaciones web üê≥</li>
        <li>Desarrollo Backend: Node.js, Express, o NestJS para APIs üîß</li>
        <li>Microfrontends: Arquitectura para aplicaciones web a gran escala üèóÔ∏è</li>
    </ul>

    <h3>Temas Adicionales para Explorar:</h3>
    <ul>
        <li>Testing: Jest, React Testing Library, Cypress üß™</li>
        <li>State Management Avanzado: Redux Toolkit, Zustand üìä</li>
        <li>GraphQL: Alternativa a REST para APIs üì°</li>
        <li>Web Performance Optimization: T√©cnicas avanzadas de rendimiento ‚ö°</li>
        <li>Accesibilidad Web (A11y): Crear aplicaciones inclusivas ‚ôø</li>
        <li>Progressive Web Apps (PWA): Experiencias m√≥viles mejoradas üì±</li>
        <li>WebAssembly: Rendimiento casi nativo en el navegador üöÄ</li>
        <li>Serverless Functions: Para backend sin servidor ‚òÅÔ∏è</li>
    </ul>

    <h3>Recomendaciones:</h3>
    <ol>
        <li>Practica regularmente construyendo proyectos personales üíª</li>
        <li>Contribuye a proyectos open source üåü</li>
        <li>Sigue blogs y canales de YouTube de desarrolladores destacados üìö</li>
        <li>Participa en comunidades de desarrollo (foros, meetups) üë•</li>
        <li>Mantente actualizado con las √∫ltimas tendencias y versiones üîÑ</li>
    </ol>
</section>

<section>
    <h2>Proyecto Final: Galer√≠a de Productos üõçÔ∏è</h2>
    <p>Desarrolla una aplicaci√≥n web utilizando la API de productos: <a href="https://github.com/IonVillarreal/nestjs-product-gallery" target="_blank">nestjs-product-gallery</a></p>

    <h3>Requisitos del Proyecto:</h3>
    <ul>
        <li>P√°gina principal con lista de productos üìã</li>
        <li>P√°gina de detalle de producto individual üîç</li>
        <li>Sistema de inicio de sesi√≥n üîê</li>
        <li>Panel de administraci√≥n con funcionalidad CRUD para productos ‚öôÔ∏è</li>
    </ul>

    <h3>Tecnolog√≠as Obligatorias:</h3>
    <ul>
        <li>Next.js üöÄ</li>
        <li>Material-UI (MUI) üé®</li>
        <li>React Hook Form üìù</li>
    </ul>

    <h3>Caracter√≠sticas Opcionales (Bonus):</h3>
    <ul>
        <li>Implementaci√≥n de Server-Side Rendering (SSR) üñ•Ô∏è</li>
        <li>Uso de TanStack Query (useQuery) para manejo de estado del servidor üìä</li>
    </ul>

    <h3>Entrega:</h3>
    <p>Enviar el enlace del repositorio (GitHub o GitLab) con el proyecto completo üì§</p>

    <p><strong>Nota:</strong> La implementaci√≥n de SSR y useQuery es opcional, pero se considerar√° positivamente en la evaluaci√≥n final.</p>
</section>

<section>
    <h2>¬°Gracias! üôè</h2>
    <p>¬øPreguntas?</p>
</section>
