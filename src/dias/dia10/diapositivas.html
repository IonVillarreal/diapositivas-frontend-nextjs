<section>
    <h1>DÃ­a 10: Despliegue a ProducciÃ³n ğŸš€</h1>
    <p>MÃ³dulo de desarrollo Frontend</p>
    <p>ğŸ‘¨â€ğŸ« Docente: Imanol Villarreal</p>
</section>


<section>
    <h2>Agenda del DÃ­a ğŸ“…</h2>
    <ol>
        <li>IntroducciÃ³n al despliegue de aplicaciones Next.js</li>
        <li>MÃ©todos de despliegue</li>
        <li>Despliegue local con PM2</li>
        <li>Despliegue en Digital Ocean</li>
        <li>Despliegue en Vercel</li>
        <li>ComparaciÃ³n de mÃ©todos de despliegue</li>
        <li>Mejores prÃ¡cticas y consideraciones de seguridad</li>
        <li>Resumen y preguntas</li>
    </ol>
</section>


<section>
    <h2>1. IntroducciÃ³n al despliegue de aplicaciones Next.js ğŸŒ</h2>
    <ul>
        <li>Â¿QuÃ© significa desplegar una aplicaciÃ³n?</li>
        <li>Consideraciones para aplicaciones Next.js</li>
        <li>Diferencias entre entornos de desarrollo y producciÃ³n</li>
        <li>Importancia de la escalabilidad y el rendimiento</li>
    </ul>
</section>


<section>
    <h2>2. MÃ©todos de despliegue ğŸ› ï¸</h2>
    <ul>
        <li>Despliegue local con PM2</li>
        <li>Despliegue en Digital Ocean</li>
        <li>Despliegue en Vercel</li>
    </ul>
</section>


<section>
    <h2>3. Despliegue local con PM2 ğŸ–¥ï¸</h2>
    <p>PM2 es un gestor de procesos para Node.js que facilita el despliegue y mantenimiento de aplicaciones.</p>
</section>


<section>
    <h3>InstalaciÃ³n de PM2</h3>
    <pre><code class="hljs bash">npm install -g pm2</code></pre>
    <p>Verifica la instalaciÃ³n:</p>
    <pre><code class="hljs bash">pm2 --version</code></pre>
</section>


<section>
    <h3>PreparaciÃ³n del proyecto Next.js</h3>
    <ol>
        <li>Clona el repositorio del proyecto:
            <pre><code
                    class="hljs bash">git clone https://github.com/IonVillarreal/mi-proyecto-noticias.git</code></pre>
        </li>
        <li>Instala las dependencias:
            <pre><code class="hljs bash">cd mi-proyecto-noticias && npm install</code></pre>
        </li>
        <li>Construye la aplicaciÃ³n:
            <pre><code class="hljs bash">npm run build</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Despliegue con PM2</h3>
    <ol>
        <li>Navega al directorio de tu proyecto:
            <pre><code class="hljs bash">cd mi-proyecto-noticias</code></pre>
        </li>
        <li>Inicia la aplicaciÃ³n con PM2:
            <pre><code class="hljs bash">pm2 start npm --name "mi-proyecto-noticias" -- start</code></pre>
        </li>
        <li>Verifica que la aplicaciÃ³n estÃ© ejecutÃ¡ndose:
            <pre><code class="hljs bash">pm2 list</code></pre>
        </li>
        <li>Configura PM2 para iniciar automÃ¡ticamente al arrancar el sistema:
            <pre><code class="hljs bash">pm2 startup systemd
pm2 save</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Comandos Ãºtiles de PM2</h3>
    <ul>
        <li>Listar procesos:
            <pre><code class="hljs bash">pm2 list</code></pre>
        </li>
        <li>Monitorear:
            <pre><code class="hljs bash">pm2 monit</code></pre>
        </li>
        <li>Reiniciar:
            <pre><code class="hljs bash">pm2 restart mi-proyecto-noticias</code></pre>
        </li>
        <li>Detener:
            <pre><code class="hljs bash">pm2 stop mi-proyecto-noticias</code></pre>
        </li>
        <li>Eliminar:
            <pre><code class="hljs bash">pm2 delete mi-proyecto-noticias</code></pre>
        </li>
    </ul>
</section>


<section>
    <h2>4. Despliegue en Digital Ocean ğŸŒŠ</h2>
    <p>Digital Ocean ofrece Droplets, que son servidores virtuales privados (VPS) donde puedes desplegar tu
        aplicaciÃ³n.</p>
</section>


<section>
    <h3>CreaciÃ³n de un Droplet</h3>
    <ol>
        <li>Inicia sesiÃ³n en tu cuenta de Digital Ocean</li>
        <li>Haz clic en "Create" y selecciona "Droplets"</li>
        <li>Elige Ubuntu como sistema operativo</li>
        <li>Selecciona un plan adecuado</li>
        <li>Elige una regiÃ³n cercana a tus usuarios</li>
        <li>Agrega tu clave SSH o crea una contraseÃ±a</li>
        <li>Haz clic en "Create Droplet"</li>
    </ol>
</section>


<section>
    <h3>ConfiguraciÃ³n del Droplet</h3>
    <ol>
        <li>ConÃ©ctate vÃ­a SSH:
            <pre><code class="hljs bash">ssh root@tu_ip_droplet</code></pre>
        </li>
        <li>Actualiza el sistema:
            <pre><code class="hljs bash">sudo apt update && sudo apt upgrade -y</code></pre>
        </li>
        <li>Instala Node.js y Git:
            <pre><code class="hljs bash">curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs git</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Despliegue de la aplicaciÃ³n en el Droplet</h3>
    <ol>
        <li>Clona el repositorio:
            <pre><code
                    class="hljs bash">git clone https://github.com/IonVillarreal/mi-proyecto-noticias.git</code></pre>
        </li>
        <li>Instala dependencias y construye la aplicaciÃ³n:
            <pre><code class="hljs bash">cd mi-proyecto-noticias
npm install
npm run build</code></pre>
        </li>
        <li>Instala y configura PM2:
            <pre><code class="hljs bash">npm install -g pm2
pm2 start npm --name "mi-proyecto-noticias" -- start
pm2 startup systemd
pm2 save</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>ConfiguraciÃ³n de Nginx como proxy inverso</h3>
    <ol>
        <li>Instala Nginx:
            <pre><code class="hljs bash">sudo apt install nginx</code></pre>
        </li>
        <li>Edita la configuraciÃ³n en <code>/etc/nginx/sites-available/default</code>:
            <pre><code class="hljs nginx">
server {
    listen 80 default_server;
    listen [::]:80 default_server;


server_name _;

# Proxy todas las solicitudes a tu aplicaciÃ³n Next.js
location / {
    proxy_pass http://127.0.0.1:8080;  # Puerto donde PM2 estÃ¡ ejecutando tu aplicaciÃ³n Next.js
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
}

# Proxy para la API en Express
location /api/ {
    rewrite ^/api/?(.*)$ /$1 break;
    proxy_pass http://127.0.0.1:3000;  # Puerto donde PM2 estÃ¡ ejecutando tu backend Express
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

}

            </code>
            </pre>
        </li>


        Verifica y reinicia Nginx:
        sudo nginx -t
        sudo systemctl restart nginx


    </ol>
</section>


<section>
    <h2>5. Despliegue en Vercel â–²</h2>
    <p>Vercel es la plataforma creada por los desarrolladores de Next.js, ofreciendo una experiencia de despliegue
        optimizada.</p>
</section>


<section>
    <h3>PreparaciÃ³n para el despliegue en Vercel</h3>
    <ol>
        <li>Crea una cuenta en Vercel</li>
        <li>Instala la CLI de Vercel:
            <pre><code class="hljs bash">npm i -g vercel</code></pre>
        </li>
        <li>Inicia sesiÃ³n:
            <pre><code class="hljs bash">vercel login</code></pre>
        </li>
    </ol>
</section>


<section>
    <h3>Despliegue con Vercel</h3>
    <ol>
        <li>Ve al directorio del proyecto:
            <pre><code class="hljs bash">cd mi-proyecto-noticias</code></pre>
        </li>
        <li>Ejecuta:
            <pre><code class="hljs bash">vercel</code></pre>
        </li>
        <li>Sigue las instrucciones en pantalla</li>
        <li>ObtÃ©n la URL de tu aplicaciÃ³n desplegada</li>
    </ol>
</section>


<section>
    <h3>ConfiguraciÃ³n adicional en Vercel</h3>
    <ul>
        <li>Variables de entorno en el dashboard</li>
        <li>Dominio personalizado</li>
        <li>IntegraciÃ³n continua con GitHub</li>
    </ul>
</section>


<section>
    <h2>6. ComparaciÃ³n de mÃ©todos de despliegue ğŸ“Š</h2>
    <table>
        <thead>
        <tr>
            <th>Aspecto</th>
            <th>PM2 (Local)</th>
            <th>Digital Ocean</th>
            <th>Vercel</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Control</td>
            <td>Alto</td>
            <td>Alto</td>
            <td>Medio</td>
        </tr>
        <tr>
            <td>Facilidad de uso</td>
            <td>Media</td>
            <td>Baja</td>
            <td>Alta</td>
        </tr>
        <tr>
            <td>Escalabilidad</td>
            <td>Limitada</td>
            <td>Alta</td>
            <td>Alta</td>
        </tr>
        <tr>
            <td>Costo</td>
            <td>Bajo</td>
            <td>Medio</td>
            <td>Bajo-Medio</td>
        </tr>
        </tbody>
    </table>
</section>


<section>
    <h2>7. Mejores prÃ¡cticas y consideraciones de seguridad ğŸ”’</h2>
    <ul>
        <li>Usa HTTPS para todas las conexiones</li>
        <li>Configura correctamente las variables de entorno</li>
        <li>Implementa logging y monitoreo</li>
        <li>MantÃ©n tus dependencias actualizadas</li>
        <li>Realiza copias de seguridad regularmente</li>
        <li>Utiliza un firewall y configura los puertos</li>
        <li>Implementa rate limiting para prevenir ataques DoS</li>
    </ul>
</section>


<section>
    <h2> Resumen de la clase ğŸ“</h2>
    <ul>
        <li>Vimos tres mÃ©todos para desplegar Next.js</li>
        <li>PM2 es ideal para entornos locales y control total</li>
        <li>Digital Ocean ofrece flexibilidad y control</li>
        <li>Vercel facilita el despliegue con mÃ­nima configuraciÃ³n</li>
        <li>La elecciÃ³n depende de tus necesidades especÃ­ficas</li>
        <li>La seguridad es esencial en cualquier despliegue</li>
    </ul>
</section>

<section>
    <h2>Resumen del Curso ğŸ“š</h2>
    <ul>
        <li>Fundamentos de React y componentes ğŸ§±</li>
        <li>Next.js y App Router para enrutamiento avanzado ğŸ—ºï¸</li>
        <li>DiseÃ±o de interfaces con Material-UI (MUI) ğŸ¨</li>
        <li>Manejo de formularios con React Hook Form y validaciÃ³n con Zod âœ…</li>
        <li>TÃ©cnicas de Data Fetching y Caching en App Router ğŸ”„</li>
        <li>ImplementaciÃ³n de autenticaciÃ³n y autorizaciÃ³n en Next.js ğŸ”</li>
        <li>GestiÃ³n de estado del servidor con TanStack Query ğŸ“Š</li>
        <li>Patrones avanzados de State Management ğŸ§ </li>
        <li>OptimizaciÃ³n de rendimiento y tÃ©cnicas avanzadas âš¡</li>
        <li>Despliegue de aplicaciones Next.js en diferentes entornos ğŸš€</li>
    </ul>
</section>

<section>
    <h2>PrÃ³ximos Pasos en Desarrollo Frontend ğŸš€</h2>

    <h3>Temas Recomendados:</h3>
    <ul>
        <li>i18n con Next.js: InternacionalizaciÃ³n de aplicaciones ğŸŒ</li>
        <li>Tailwind CSS: Framework de utilidades CSS para diseÃ±o rÃ¡pido ğŸ¨</li>
        <li>Shadcn UI: Componentes reutilizables y personalizables ğŸ§©</li>
        <li>Despliegue con Docker: ContainerizaciÃ³n para aplicaciones web ğŸ³</li>
        <li>Desarrollo Backend: Node.js, Express, o NestJS para APIs ğŸ”§</li>
        <li>Microfrontends: Arquitectura para aplicaciones web a gran escala ğŸ—ï¸</li>
    </ul>

    <h3>Temas Adicionales para Explorar:</h3>
    <ul>
        <li>Testing: Jest, React Testing Library, Cypress ğŸ§ª</li>
        <li>State Management Avanzado: Redux Toolkit, Zustand ğŸ“Š</li>
        <li>GraphQL: Alternativa a REST para APIs ğŸ“¡</li>
        <li>Web Performance Optimization: TÃ©cnicas avanzadas de rendimiento âš¡</li>
        <li>Accesibilidad Web (A11y): Crear aplicaciones inclusivas â™¿</li>
        <li>Progressive Web Apps (PWA): Experiencias mÃ³viles mejoradas ğŸ“±</li>
        <li>WebAssembly: Rendimiento casi nativo en el navegador ğŸš€</li>
        <li>Serverless Functions: Para backend sin servidor â˜ï¸</li>
    </ul>

    <h3>Recomendaciones:</h3>
    <ol>
        <li>Practica regularmente construyendo proyectos personales ğŸ’»</li>
        <li>Contribuye a proyectos open source ğŸŒŸ</li>
        <li>Sigue blogs y canales de YouTube de desarrolladores destacados ğŸ“š</li>
        <li>Participa en comunidades de desarrollo (foros, meetups) ğŸ‘¥</li>
        <li>Mantente actualizado con las Ãºltimas tendencias y versiones ğŸ”„</li>
    </ol>
</section>

<section>
    <h2>Proyecto Final: GalerÃ­a de Productos ğŸ›ï¸</h2>
    <p>Desarrolla una aplicaciÃ³n web utilizando la API de productos: <a href="https://github.com/IonVillarreal/nestjs-product-gallery" target="_blank">nestjs-product-gallery</a></p>

    <h3>Requisitos del Proyecto:</h3>
    <ul>
        <li>PÃ¡gina principal con lista de productos ğŸ“‹</li>
        <li>PÃ¡gina de detalle de producto individual ğŸ”</li>
        <li>Sistema de inicio de sesiÃ³n ğŸ”</li>
        <li>Panel de administraciÃ³n con funcionalidad CRUD para productos âš™ï¸</li>
    </ul>

    <h3>TecnologÃ­as Obligatorias:</h3>
    <ul>
        <li>Next.js ğŸš€</li>
        <li>Material-UI (MUI) ğŸ¨</li>
        <li>React Hook Form ğŸ“</li>
    </ul>

    <h3>CaracterÃ­sticas Opcionales (Bonus):</h3>
    <ul>
        <li>ImplementaciÃ³n de Server-Side Rendering (SSR) ğŸ–¥ï¸</li>
        <li>Uso de TanStack Query (useQuery) para manejo de estado del servidor ğŸ“Š</li>
    </ul>

    <h3>Entrega:</h3>
    <p>Enviar el enlace del repositorio (GitHub o GitLab) con el proyecto completo ğŸ“¤</p>

    <p><strong>Nota:</strong> La implementaciÃ³n de SSR y useQuery es opcional, pero se considerarÃ¡ positivamente en la evaluaciÃ³n final.</p>
</section>

<section>
    <h2>Â¡Gracias! ğŸ™</h2>
    <p>Â¿Preguntas?</p>
</section>
